<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Login - Quantum Financial System</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        :root {
            --tg-body-font-family: 'Inter', serif;
            --tg-heading-font-family: 'Inter', serif;
            --tg-icon-font-family: "Font Awesome 5 Free";
            --tg-body-font-size: 16px;
            --tg-body-color: #9E9E9E;
            --tg-heading-color: #ffffff;
            --tg-theme-primary: #4b59f5;
            --tg-color-dark: #0C0C0C;
            --tg-color-dark-2: #000000;
            --tg-color-dark-3: #262626;
            --tg-border-1: #363636;
        }

        [data-theme="light"] {
            --tg-body-color: #5a5a5a;
            --tg-heading-color: #1a1a1a;
            --tg-color-dark: #f8f9fa;
            --tg-color-dark-2: #ffffff;
            --tg-color-dark-3: #e9ecef;
            --tg-border-1: #dee2e6;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--tg-body-font-family);
            font-size: var(--tg-body-font-size);
            color: var(--tg-body-color);
            background: var(--tg-color-dark);
            transition: background-color 0.3s ease;
        }
        
        .main-container {
            min-height: 100vh;
            display: flex;
        }

        .left-section {
            flex: 0 0 42%;
            background: var(--tg-color-dark-2);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px 30px;
            position: relative;
        }

        .right-section {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px 30px;
        }

        .logo-text {
            font-size: 34px;
            font-weight: 800;
            color: white;
            text-decoration: none;
            letter-spacing: 2.5px;
            text-transform: uppercase;
            text-shadow: 0px 2px 4px rgba(0,0,0,0.1);
            display: block;
            text-align: center;
            margin: 20px auto;
        }

        .content-wrapper {
            max-width: 450px;
            width: 100%;
            text-align: center;
        }

        .content-wrapper h3 {
            font-size: 20px;
            font-weight: 500;
            color: var(--tg-heading-color);
            margin-bottom: 15px;
        }

        .content-wrapper h1 {
            font-size: 52px;
            font-weight: 800;
            color: var(--tg-heading-color);
            margin-bottom: 5px;
        }

        .content-wrapper h2 {
            font-size: 36px;
            font-weight: 700;
            color: var(--tg-heading-color);
            margin-bottom: 30px;
        }

        .image-wrapper {
            width: 100%;
            max-width: 400px;
            margin: 0 auto;
        }

        .image-wrapper img {
            width: 100%;
            height: auto;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .auth-module {
            width: 100%;
            max-width: 500px;
            padding: 40px;
            background: var(--tg-color-dark-3);
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .back-btn {
            display: inline-flex;
            align-items: center;
            color: var(--tg-body-color);
            text-decoration: none;
            font-weight: 500;
            margin-bottom: 30px;
            transition: color 0.3s;
        }

        .back-btn:hover {
            color: var(--tg-theme-primary);
        }

        .auth-title {
            font-size: 32px;
            font-weight: 700;
            color: var(--tg-heading-color);
            margin-bottom: 10px;
        }

        .auth-text {
            color: var(--tg-body-color);
            margin-bottom: 30px;
        }

        .auth-text a {
            color: var(--tg-theme-primary);
            text-decoration: none;
        }

        .form-label {
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--tg-heading-color);
            display: block;
        }

        .star {
            color: #dc3545;
        }

        .input-form-control {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid var(--tg-border-1);
            border-radius: 10px;
            font-size: 16px;
            background: var(--tg-color-dark-2);
            color: var(--tg-heading-color);
            transition: all 0.3s;
        }

        .input-form-control:focus {
            outline: none;
            border-color: var(--tg-theme-primary);
            box-shadow: 0 0 0 3px rgba(75, 89, 245, 0.1);
        }

        .password-wrapper {
            position: relative;
        }

        .eye-icon {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            color: var(--tg-body-color);
        }

        .btn-primary {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            font-size: 16px;
            background: var(--tg-theme-primary);
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(75, 89, 245, 0.3);
        }

        .btn-primary:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .error-message {
            color: #dc3545;
            font-size: 14px;
            margin-top: 5px;
            display: block;
        }

        .success-message {
            color: #28a745;
            font-size: 14px;
            margin-top: 5px;
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        #form-messages {
            display: none;
            padding: 12px;
            margin-bottom: 20px;
            border-radius: 8px;
            font-size: 14px;
        }

        #form-messages.alert-success {
            background: rgba(40, 167, 69, 0.1);
            border: 1px solid rgba(40, 167, 69, 0.3);
            color: #28a745;
        }

        #form-messages.alert-danger {
            background: rgba(220, 53, 69, 0.1);
            border: 1px solid rgba(220, 53, 69, 0.3);
            color: #dc3545;
        }

        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: var(--tg-color-dark-3);
            border: 1px solid var(--tg-border-1);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .theme-toggle:hover {
            transform: scale(1.1);
        }

        .theme-toggle svg {
            width: 24px;
            height: 24px;
            fill: var(--tg-heading-color);
        }

        .forgot-password {
            text-align: right;
            margin-top: 10px;
        }

        .forgot-password a {
            color: var(--tg-theme-primary);
            text-decoration: none;
            font-size: 14px;
        }

        .forgot-password a:hover {
            text-decoration: underline;
        }

        .spinner-border {
            width: 16px;
            height: 16px;
        }

        .admin-badge {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 10px;
        }

        .admin-credentials {
            background: rgba(75, 89, 245, 0.1);
            border: 1px solid rgba(75, 89, 245, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            font-size: 14px;
        }

        .admin-credentials h4 {
            color: var(--tg-theme-primary);
            margin-bottom: 10px;
            font-size: 14px;
        }

        .admin-credentials p {
            margin-bottom: 5px;
            font-size: 13px;
        }

        @media (max-width: 992px) {
            .left-section {
                display: none;
            }

            .right-section {
                flex: 1;
            }
        }

        @media (max-width: 768px) {
            .auth-module {
                padding: 30px 20px;
            }

            .auth-title {
                font-size: 26px;
            }

            .theme-toggle {
                width: 45px;
                height: 45px;
            }
        }

        @media (max-width: 576px) {
            .right-section {
                padding: 20px 15px;
            }

            .auth-module {
                padding: 25px 15px;
            }
        }
    </style>
</head>
<body>
    <div class="theme-toggle" id="themeToggle">
        <svg id="themeIcon" viewBox="0 0 24 24">
            <path d="M12,18C11.11,18 10.26,17.8 9.5,17.45C11.56,16.5 13,14.42 13,12C13,9.58 11.56,7.5 9.5,6.55C10.26,6.2 11.11,6 12,6A6,6 0 0,1 18,12A6,6 0 0,1 12,18M20,8.69V4H15.31L12,0.69L8.69,4H4V8.69L0.69,12L4,15.31V20H8.69L12,23.31L15.31,20H20V15.31L23.31,12L20,8.69Z" />
        </svg>
    </div>

    <div class="main-container">
        <div class="left-section">
            <a href="/" class="logo-text">QFS</a>
            <div class="content-wrapper">
                <h3>Admin Access</h3>
                <h1>Quantum</h1>
                <h2>Financial System</h2>
                <div class="image-wrapper">
                    <img src="/images/login.jpg" alt="Admin Login Illustration">
                </div>
            </div>
        </div>

        <div class="right-section">
            <div class="auth-module">
                <a href="/" class="back-btn">
                    <svg width="12" height="12" viewBox="0 0 12 12" fill="none">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M8.47075 10.4709C8.7311 10.2105 8.7311 9.78842 8.47075 9.52807L4.94216 5.99947L8.47075 2.47087C8.7311 2.21053 8.7311 1.78842 8.47075 1.52807C8.2104 1.26772 7.78829 1.26772 7.52794 1.52807L3.52795 5.52807C3.2676 5.78842 3.2676 6.21053 3.52795 6.47088L7.52794 10.4709C7.78829 10.7312 8.2104 10.7312 8.47075 10.4709Z" fill="currentColor"/>
                    </svg>
                    <span style="margin-left: 5px;">Back to Site</span>
                </a>

                <h1 class="auth-title">Admin Login <span class="admin-badge">ADMIN</span></h1>
                <p class="auth-text">Restricted access - Admin privileges required</p>

                <div id="form-messages"></div>

                <form id="login-form">
                    <div class="form-group">
                        <label class="form-label">Email <span class="star">*</span></label>
                        <input type="email" class="input-form-control" id="email" required value="admin@qfs.com">
                        <span class="error-message" id="email_error"></span>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Password <span class="star">*</span></label>
                        <div class="password-wrapper">
                            <input type="password" class="input-form-control" id="password" required value="admin123">
                            <span class="eye-icon" id="toggle-password">
                                <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M1.71998 1.71967C2.01287 1.42678 2.48775 1.42678 2.78064 1.71967L5.50969 4.44872C5.55341 4.48345 5.59378 4.52354 5.62977 4.5688L13.423 12.3621C13.4739 12.4011 13.5204 12.4471 13.561 12.5L16.2806 15.2197C16.5735 15.5126 16.5735 15.9874 16.2806 16.2803C15.9877 16.5732 15.5129 16.5732 15.22 16.2803L12.8547 13.915C11.771 14.5491 10.479 15 9.00031 15C6.85406 15 5.10432 14.0515 3.80787 12.9694C2.51318 11.8889 1.62553 10.6393 1.18098 9.93536C1.1751 9.92606 1.16907 9.91657 1.16291 9.90687C1.07468 9.768 0.960135 9.5877 0.902237 9.33506C0.85549 9.13108 0.855506 8.86871 0.902276 8.66474C0.960212 8.41207 1.07508 8.23131 1.16354 8.09212C1.16975 8.08235 1.17583 8.07278 1.18175 8.06341C1.63353 7.34824 2.55099 6.05644 3.89682 4.95717L1.71998 2.78033C1.42709 2.48744 1.42709 2.01256 1.71998 1.71967Z" fill="currentColor"/>
                                </svg>
                            </span>
                        </div>
                        <span class="error-message" id="password_error"></span>
                    </div>

                    <button class="btn-primary" type="submit" id="submitBtn">
                        <span class="spinner-border text-white d-none" id="spinner"></span>
                        <span id="btnText">Admin Sign In</span>
                        <svg width="12" height="12" viewBox="0 0 12 12" fill="none">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M3.5286 10.4698C3.26825 10.2094 3.26825 9.78732 3.5286 9.52697L7.05719 5.99837L3.5286 2.46978C3.26825 2.20943 3.26825 1.78732 3.5286 1.52697C3.78895 1.26662 4.21106 1.26662 4.47141 1.52697L8.47141 5.52697C8.73176 5.78732 8.73176 6.20943 8.47141 6.46978L4.47141 10.4698C4.21106 10.7301 3.78895 10.7301 3.5286 10.4698Z" fill="currentColor"/>
                        </svg>
                    </button>

                    
                </form>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Use your existing login.js functionality
        document.addEventListener("DOMContentLoaded", function () {
            // Your existing JavaScript code from login.js
            const themeToggle = document.getElementById('themeToggle');
            const themeIcon = document.getElementById('themeIcon');
            const currentTheme = localStorage.getItem('theme') || 'dark';
            document.documentElement.setAttribute('data-theme', currentTheme);
            updateThemeIcon(currentTheme);

            if (themeToggle) {
                themeToggle.addEventListener('click', function() {
                    let theme = document.documentElement.getAttribute('data-theme');
                    let newTheme = theme === 'dark' ? 'light' : 'dark';
                    document.documentElement.setAttribute('data-theme', newTheme);
                    localStorage.setItem('theme', newTheme);
                    updateThemeIcon(newTheme);
                });
            }

            function updateThemeIcon(theme) {
                if (!themeIcon) return;
                if (theme === 'dark') {
                    themeIcon.innerHTML = '<path d="M12,7C9.24,7 7,9.24 7,12C7,14.76 9.24,17 12,17C14.76,17 17,14.76 17,12C17,9.24 14.76,7 12,7M12,2L14.39,5.42C13.65,5.15 12.84,5 12,5C11.16,5 10.35,5.15 9.61,5.42L12,2M3.34,7L7.5,6.65C6.9,7.16 6.36,7.78 5.94,8.5C5.5,9.24 5.25,10 5.11,10.79L3.34,7M3.36,17L5.12,13.23C5.26,14 5.53,14.78 5.95,15.5C6.37,16.24 6.91,16.86 7.5,17.37L3.36,17M20.65,7L18.88,10.79C18.74,10 18.47,9.23 18.05,8.5C17.63,7.78 17.1,7.15 16.5,6.64L20.65,7M20.64,17L16.5,17.36C17.09,16.85 17.62,16.22 18.04,15.5C18.46,14.77 18.73,14 18.87,13.21L20.64,17M12,22L9.59,18.56C10.33,18.83 11.14,19 12,19C12.82,19 13.63,18.83 14.37,18.56L12,22Z" />';
                } else {
                    themeIcon.innerHTML = '<path d="M12,18C11.11,18 10.26,17.8 9.5,17.45C11.56,16.5 13,14.42 13,12C13,9.58 11.56,7.5 9.5,6.55C10.26,6.2 11.11,6 12,6A6,6 0 0,1 18,12A6,6 0 0,1 12,18M20,8.69V4H15.31L12,0.69L8.69,4H4V8.69L0.69,12L4,15.31V20H8.69L12,23.31L15.31,20H20V15.31L23.31,12L20,8.69Z" />';
                }
            }

            // Toggle password visibility
            const togglePassword = document.getElementById('toggle-password');
            if (togglePassword) {
                togglePassword.addEventListener('click', function() {
                    const passwordInput = document.getElementById('password');
                    if (!passwordInput) return;
                    
                    const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
                    passwordInput.setAttribute('type', type);
                    
                    const icon = this.querySelector('svg');
                    if (type === 'text') {
                        icon.innerHTML = '<path fill-rule="evenodd" clip-rule="evenodd" d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z" fill="currentColor"/>';
                    } else {
                        icon.innerHTML = '<path fill-rule="evenodd" clip-rule="evenodd" d="M1.71998 1.71967C2.01287 1.42678 2.48775 1.42678 2.78064 1.71967L5.50969 4.44872C5.55341 4.48345 5.59378 4.52354 5.62977 4.5688L13.423 12.3621C13.4739 12.4011 13.5204 12.4471 13.561 12.5L16.2806 15.2197C16.5735 15.5126 16.5735 15.9874 16.2806 16.2803C15.9877 16.5732 15.5129 16.5732 15.22 16.2803L12.8547 13.915C11.771 14.5491 10.479 15 9.00031 15C6.85406 15 5.10432 14.0515 3.80787 12.9694C2.51318 11.8889 1.62553 10.6393 1.18098 9.93536C1.1751 9.92606 1.16907 9.91657 1.16291 9.90687C1.07468 9.768 0.960135 9.5877 0.902237 9.33506C0.85549 9.13108 0.855506 8.86871 0.902276 8.66474C0.960212 8.41207 1.07508 8.23131 1.16354 8.09212C1.16975 8.08235 1.17583 8.07278 1.18175 8.06341C1.63353 7.34824 2.55099 6.05644 3.89682 4.95717L1.71998 2.78033C1.42709 2.48744 1.42709 2.01256 1.71998 1.71967Z" fill="currentColor"/>';
                    }
                });
            }

            // Form submission
            const form = document.getElementById('login-form');
            if (form) {
                form.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    
                    // Show loading state
                    document.getElementById('spinner')?.classList.remove('d-none');
                    document.getElementById('btnText').textContent = 'Signing In...';
                    document.getElementById('submitBtn').disabled = true;

                    try {
                        const loginData = {
                            email: document.getElementById('email').value.trim(),
                            password: document.getElementById('password').value
                        };

                        console.log('Sending admin login data:', loginData);

                        const response = await fetch('/auth/login', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify(loginData)
                        });

                        const result = await response.json();
                        console.log('Admin login response:', result);

                        if (response.ok && result.success) {
                            showMessage('Admin login successful! Redirecting...', 'success');
                            
                            // Force redirect to admin panel
                            setTimeout(() => {
                                window.location.href = '/admin';
                            }, 1000);
                            
                        } else {
                            let errorMessage = result.message || 'Admin login failed. Please try again.';
                            
                            if (response.status === 401) {
                                errorMessage = 'Invalid admin credentials. Please try again.';
                            }
                            
                            showMessage(errorMessage, 'error');
                            resetFormState();
                        }

                    } catch (error) {
                        console.error('Admin login network error:', error);
                        showMessage('Network error. Please check your connection and try again.', 'error');
                        resetFormState();
                    }
                });
            }

            function showMessage(message, type) {
                const messageDiv = document.getElementById('form-messages');
                if (!messageDiv) return;
                
                messageDiv.className = `alert ${type === 'success' ? 'alert-success' : 'alert-danger'}`;
                messageDiv.textContent = message;
                messageDiv.style.display = 'block';
                
                messageDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }

            function resetFormState() {
                const spinner = document.getElementById('spinner');
                const btnText = document.getElementById('btnText');
                const submitBtn = document.getElementById('submitBtn');
                
                if (spinner) spinner.classList.add('d-none');
                if (btnText) btnText.textContent = 'Admin Sign In';
                if (submitBtn) submitBtn.disabled = false;
            }
        });
    </script>
</body>
</html>