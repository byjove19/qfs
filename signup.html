<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register - Quantum Financial System</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/css/intlTelInput.css">
   <link rel="stylesheet" href="css/main.css">
</head>
<body>
    <div class="theme-toggle" id="themeToggle">
        <svg id="themeIcon" viewBox="0 0 24 24">
            <path d="M12,18C11.11,18 10.26,17.8 9.5,17.45C11.56,16.5 13,14.42 13,12C13,9.58 11.56,7.5 9.5,6.55C10.26,6.2 11.11,6 12,6A6,6 0 0,1 18,12A6,6 0 0,1 12,18M20,8.69V4H15.31L12,0.69L8.69,4H4V8.69L0.69,12L4,15.31V20H8.69L12,23.31L15.31,20H20V15.31L23.31,12L20,8.69Z" />
        </svg>
    </div>

    <div class="main-container">
        <div class="left-section">
            <a href="/" class="logo-text">QFS</a>
            <div class="content-wrapper">
                <h3>Begin the Journey Today</h3>
                <h1>Quantum</h1>
                <h2>Financial System</h2>
                <div class="image-wrapper">
                    <img src="images/register.jpg" alt="Register Illustration">
                </div>
            </div>
        </div>

        <div class="right-section">
            <div class="auth-module">
                <a href="/" class="back-btn">
                    <svg width="12" height="12" viewBox="0 0 12 12" fill="none">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M8.47075 10.4709C8.7311 10.2105 8.7311 9.78842 8.47075 9.52807L4.94216 5.99947L8.47075 2.47087C8.7311 2.21053 8.7311 1.78842 8.47075 1.52807C8.2104 1.26772 7.78829 1.26772 7.52794 1.52807L3.52795 5.52807C3.2676 5.78842 3.2676 6.21053 3.52795 6.47088L7.52794 10.4709C7.78829 10.7312 8.2104 10.7312 8.47075 10.4709Z" fill="currentColor"/>
                    </svg>
                    <span style="margin-left: 5px;">Back</span>
                </a>

                <h1 class="auth-title">Create Account</h1>
                <p class="auth-text">Already have an account? <a href="/login.html">Sign in here</a></p>

                <div id="form-messages"></div>

                <form id="registration-form">
                    <div class="row">
                        <div class="col-6">
                            <div class="form-group">
                                <label class="form-label">First Name <span class="star">*</span></label>
                                <input type="text" class="input-form-control" id="first_name" maxlength="30" required>
                                <span class="error-message" id="first_name_error"></span>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="form-group">
                                <label class="form-label">Last Name <span class="star">*</span></label>
                                <input type="text" class="input-form-control" id="last_name" maxlength="30" required>
                                <span class="error-message" id="last_name_error"></span>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Email <span class="star">*</span></label>
                        <input type="email" class="input-form-control" id="email" required>
                        <span class="error-message" id="email_error"></span>
                        <span class="success-message" id="email_ok"></span>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Phone</label>
                        <input type="tel" class="input-form-control" id="phone">
                        <span class="error-message" id="phone_error"></span>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Password <span class="star">*</span></label>
                        <div class="password-wrapper">
                            <input type="password" class="input-form-control" id="password" minlength="6" required>
                            <span class="eye-icon" id="toggle-password">
                                <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M1.71998 1.71967C2.01287 1.42678 2.48775 1.42678 2.78064 1.71967L5.50969 4.44872C5.55341 4.48345 5.59378 4.52354 5.62977 4.5688L13.423 12.3621C13.4739 12.4011 13.5204 12.4471 13.561 12.5L16.2806 15.2197C16.5735 15.5126 16.5735 15.9874 16.2806 16.2803C15.9877 16.5732 15.5129 16.5732 15.22 16.2803L12.8547 13.915C11.771 14.5491 10.479 15 9.00031 15C6.85406 15 5.10432 14.0515 3.80787 12.9694C2.51318 11.8889 1.62553 10.6393 1.18098 9.93536C1.1751 9.92606 1.16907 9.91657 1.16291 9.90687C1.07468 9.768 0.960135 9.5877 0.902237 9.33506C0.85549 9.13108 0.855506 8.86871 0.902276 8.66474C0.960212 8.41207 1.07508 8.23131 1.16354 8.09212C1.16975 8.08235 1.17583 8.07278 1.18175 8.06341C1.63353 7.34824 2.55099 6.05644 3.89682 4.95717L1.71998 2.78033C1.42709 2.48744 1.42709 2.01256 1.71998 1.71967Z" fill="currentColor"/>
                                </svg>
                            </span>
                        </div>
                        <span class="error-message" id="password_error"></span>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Confirm Password <span class="star">*</span></label>
                        <input type="password" class="input-form-control" id="password_confirmation" minlength="6" required>
                        <span class="error-message" id="password_confirmation_error"></span>
                    </div>

                    <button class="btn-primary" type="submit" id="submitBtn">
                        <span class="spinner-border text-white d-none" id="spinner"></span>
                        <span id="btnText">Continue</span>
                        <svg width="12" height="12" viewBox="0 0 12 12" fill="none">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M3.5286 10.4698C3.26825 10.2094 3.26825 9.78732 3.5286 9.52697L7.05719 5.99837L3.5286 2.46978C3.26825 2.20943 3.26825 1.78732 3.5286 1.52697C3.78895 1.26662 4.21106 1.26662 4.47141 1.52697L8.47141 5.52697C8.73176 5.78732 8.73176 6.20943 8.47141 6.46978L4.47141 10.4698C4.21106 10.7301 3.78895 10.7301 3.5286 10.4698Z" fill="currentColor"/>
                        </svg>
                    </button>
                </form>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/js/intlTelInput.min.js"></script>
    <script>
        $(document).ready(function() {
            // Initialize phone input
            const phoneInput = document.querySelector("#phone");
            const iti = window.intlTelInput(phoneInput, {
                initialCountry: "us",
                separateDialCode: true,
                utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/js/utils.js",
                preferredCountries: ['us', 'gb', 'ca', 'au']
            });

            // Theme toggle
            const themeToggle = document.getElementById('themeToggle');
            const themeIcon = document.getElementById('themeIcon');
            const currentTheme = localStorage.getItem('theme') || 'dark';
            document.documentElement.setAttribute('data-theme', currentTheme);
            updateThemeIcon(currentTheme);

            themeToggle.addEventListener('click', function() {
                let theme = document.documentElement.getAttribute('data-theme');
                let newTheme = theme === 'dark' ? 'light' : 'dark';
                document.documentElement.setAttribute('data-theme', newTheme);
                localStorage.setItem('theme', newTheme);
                updateThemeIcon(newTheme);
            });

            function updateThemeIcon(theme) {
                if (theme === 'dark') {
                    themeIcon.innerHTML = '<path d="M12,7C9.24,7 7,9.24 7,12C7,14.76 9.24,17 12,17C14.76,17 17,14.76 17,12C17,9.24 14.76,7 12,7M12,2L14.39,5.42C13.65,5.15 12.84,5 12,5C11.16,5 10.35,5.15 9.61,5.42L12,2M3.34,7L7.5,6.65C6.9,7.16 6.36,7.78 5.94,8.5C5.5,9.24 5.25,10 5.11,10.79L3.34,7M3.36,17L5.12,13.23C5.26,14 5.53,14.78 5.95,15.5C6.37,16.24 6.91,16.86 7.5,17.37L3.36,17M20.65,7L18.88,10.79C18.74,10 18.47,9.23 18.05,8.5C17.63,7.78 17.1,7.15 16.5,6.64L20.65,7M20.64,17L16.5,17.36C17.09,16.85 17.62,16.22 18.04,15.5C18.46,14.77 18.73,14 18.87,13.21L20.64,17M12,22L9.59,18.56C10.33,18.83 11.14,19 12,19C12.82,19 13.63,18.83 14.37,18.56L12,22Z" />';
                } else {
                    themeIcon.innerHTML = '<path d="M12,18C11.11,18 10.26,17.8 9.5,17.45C11.56,16.5 13,14.42 13,12C13,9.58 11.56,7.5 9.5,6.55C10.26,6.2 11.11,6 12,6A6,6 0 0,1 18,12A6,6 0 0,1 12,18M20,8.69V4H15.31L12,0.69L8.69,4H4V8.69L0.69,12L4,15.31V20H8.69L12,23.31L15.31,20H20V15.31L23.31,12L20,8.69Z" />';
                }
            }

            // Toggle password visibility
            $('#toggle-password').on('click', function() {
                const passwordInput = $('#password');
                const type = passwordInput.attr('type') === 'password' ? 'text' : 'password';
                passwordInput.attr('type', type);
            });

            // Form validation
            $('input').on('input', function() {
                const fieldName = $(this).attr('id');
                $(`#${fieldName}_error`).text('');
            });

            $('#password_confirmation').on('input', function() {
                const password = $('#password').val();
                const confirmPassword = $(this).val();
                if (confirmPassword && password !== confirmPassword) {
                    $('#password_confirmation_error').text('Passwords do not match.');
                } else {
                    $('#password_confirmation_error').text('');
                }
            });

            // Form submission
            $('#registration-form').on('submit', function(e) {
                e.preventDefault();
                
                if (!validateForm()) return;

                $('#spinner').removeClass('d-none');
                $('#btnText').text('Processing...');
                $('#submitBtn').prop('disabled', true);

                // Simulate API call
                setTimeout(() => {
                    const isSuccess = Math.random() > 0.2;
                    
                    if (isSuccess) {
                        showMessage('Registration successful! Redirecting...', 'success');
                        setTimeout(() => {
                            window.location.href = '/login';
                        }, 2000);
                    } else {
                        showMessage('Registration failed. Please try again.', 'error');
                        $('#spinner').addClass('d-none');
                        $('#btnText').text('Continue');
                        $('#submitBtn').prop('disabled', false);
                    }
                }, 2000);
            });

            function validateForm() {
                let isValid = true;
                
                const firstName = $('#first_name').val().trim();
                if (!firstName || firstName.length < 2) {
                    $('#first_name_error').text('First name must be at least 2 characters.');
                    isValid = false;
                }

                const lastName = $('#last_name').val().trim();
                if (!lastName || lastName.length < 2) {
                    $('#last_name_error').text('Last name must be at least 2 characters.');
                    isValid = false;
                }

                const email = $('#email').val().trim();
                if (!email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                    $('#email_error').text('Please enter a valid email address.');
                    isValid = false;
                }

                const password = $('#password').val();
                if (!password || password.length < 6) {
                    $('#password_error').text('Password must be at least 6 characters.');
                    isValid = false;
                }

                const confirmPassword = $('#password_confirmation').val();
                if (password !== confirmPassword) {
                    $('#password_confirmation_error').text('Passwords do not match.');
                    isValid = false;
                }

                return isValid;
            }

            function showMessage(message, type) {
                const messageDiv = $('#form-messages');
                messageDiv.removeClass('alert-success alert-danger')
                    .addClass(`alert-${type === 'success' ? 'success' : 'danger'}`)
                    .text(message)
                    .show();
                
                if (type === 'success') {
                    setTimeout(() => messageDiv.hide(), 5000);
                }
            }
        });
    </script>
</body>
</html>